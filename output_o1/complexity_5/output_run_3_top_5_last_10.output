[
  {
    "timestamp": "2025-01-29T14:49:22.940709",
    "response": {
      "id": "chatcmpl-AuyVeTB6vCX3glEUqvMuBNJb3cuMZ",
      "choices": [
        {
          "finish_reason": "tool_calls",
          "index": 0,
          "logprobs": null,
          "message": {
            "content": null,
            "refusal": null,
            "role": "assistant",
            "audio": null,
            "function_call": null,
            "tool_calls": [
              {
                "id": "call_CwzGVAYBfzBbbsSflTCJKB5h",
                "function": {
                  "arguments": "{\"sql\":\"WITH last_ten_open AS (\\n    SELECT\\n        t.id,\\n        t.status,\\n        t.created_at,\\n        t.description,\\n        SUBSTRING(t.description FROM '([0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12})') AS extracted_project_id\\n    FROM support_ticket t\\n    WHERE t.status = 'open'\\n    ORDER BY t.created_at DESC\\n    LIMIT 10\\n), with_plan_and_category AS (\\n    SELECT\\n        l.id,\\n        l.description,\\n        l.created_at,\\n        l.extracted_project_id,\\n        (\\n            SELECT p.name\\n            FROM project_plan_changelogs pc\\n            JOIN plans p ON pc.plan_id = p.id\\n            WHERE pc.project_id::text = l.extracted_project_id\\n            ORDER BY pc.created_at DESC\\n            LIMIT 1\\n        ) AS plan_name,\\n        CASE\\n            WHEN l.description ~* '(downtime|outage|500 error|time out|disruption)' THEN 'downtime'\\n            WHEN l.description ~* '(intermittent|random request fail|instability)' THEN 'reliability'\\n            WHEN l.description ~* '(performance|latency|slow)' THEN 'performance'\\n            WHEN l.description ~* '(bug|issue|problem|fix)' THEN 'bug'\\n            WHEN l.description ~* '(feature request|enhancement|request)' THEN 'feature request'\\n            ELSE 'others'\\n        END AS category\\n    FROM last_ten_open l\\n)\\nSELECT id\\nFROM with_plan_and_category\\nORDER BY\\n    CASE\\n        WHEN (LOWER(plan_name) = 'advanced' AND category IN ('downtime','reliability')) THEN 1\\n        WHEN (LOWER(plan_name) = 'base' AND category IN ('downtime','reliability')) THEN 2\\n        WHEN (LOWER(plan_name) = 'free' AND category = 'downtime') THEN 3\\n        WHEN category = 'downtime' THEN 4\\n        WHEN category = 'reliability' THEN 5\\n        WHEN category = 'performance' THEN 6\\n        WHEN category = 'bug' THEN 7\\n        WHEN category = 'feature request' THEN 8\\n        ELSE 9\\n    END,\\n    created_at ASC\\nLIMIT 5\"}",
                  "name": "query_support_tickets"
                },
                "type": "function"
              }
            ]
          }
        }
      ],
      "created": 1738142330,
      "model": "o1-2024-12-17",
      "object": "chat.completion",
      "service_tier": "default",
      "system_fingerprint": "fp_d91c966719",
      "usage": {
        "completion_tokens": 3949,
        "prompt_tokens": 1058,
        "total_tokens": 5007,
        "completion_tokens_details": {
          "accepted_prediction_tokens": 0,
          "audio_tokens": 0,
          "reasoning_tokens": 3392,
          "rejected_prediction_tokens": 0
        },
        "prompt_tokens_details": {
          "audio_tokens": 0,
          "cached_tokens": 0
        }
      }
    }
  },
  {
    "timestamp": "2025-01-29T14:49:35.442265",
    "response": {
      "id": "chatcmpl-AuyWBbX9sQqrvDC8ATgqANg8k2mXH",
      "choices": [
        {
          "finish_reason": "tool_calls",
          "index": 0,
          "logprobs": null,
          "message": {
            "content": null,
            "refusal": null,
            "role": "assistant",
            "audio": null,
            "function_call": null,
            "tool_calls": [
              {
                "id": "call_rcw20j24HYOBeTjAUWnaH01n",
                "function": {
                  "arguments": "{\"sql\":\"SELECT \\n    t.id, \\n    t.status, \\n    t.created_at, \\n    t.description, \\n    SUBSTRING(t.description FROM '([0-9A-Fa-f]{8}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{4}-[0-9A-Fa-f]{12})') AS extracted_project_id\\nFROM support_ticket t\\nWHERE t.status = 'open'\\nORDER BY t.created_at DESC\\nLIMIT 10;\"}",
                  "name": "query_support_tickets"
                },
                "type": "function"
              }
            ]
          }
        }
      ],
      "created": 1738142363,
      "model": "o1-2024-12-17",
      "object": "chat.completion",
      "service_tier": "default",
      "system_fingerprint": "fp_d91c966719",
      "usage": {
        "completion_tokens": 1042,
        "prompt_tokens": 1658,
        "total_tokens": 2700,
        "completion_tokens_details": {
          "accepted_prediction_tokens": 0,
          "audio_tokens": 0,
          "reasoning_tokens": 896,
          "rejected_prediction_tokens": 0
        },
        "prompt_tokens_details": {
          "audio_tokens": 0,
          "cached_tokens": 0
        }
      }
    }
  },
  {
    "timestamp": "2025-01-29T14:50:05.367657",
    "response": {
      "id": "chatcmpl-AuyWN5W6uJ08vIbef1ZbUEtlRuG2I",
      "choices": [
        {
          "finish_reason": "tool_calls",
          "index": 0,
          "logprobs": null,
          "message": {
            "content": null,
            "refusal": null,
            "role": "assistant",
            "audio": null,
            "function_call": null,
            "tool_calls": [
              {
                "id": "call_Ti5vtY9kJxoGyWWSOayYHgUR",
                "function": {
                  "arguments": "{\"sql\":\"WITH cte AS (\\n  SELECT ppc.project_id, p.name AS plan_name, ppc.created_at,\\n         ROW_NUMBER() OVER (PARTITION BY ppc.project_id ORDER BY ppc.created_at DESC) AS rn\\n  FROM project_plan_changelogs ppc\\n  JOIN plans p ON ppc.plan_id = p.id\\n  WHERE ppc.project_id IN (\\n    '2a8d4b07-c391-450f-8153-f6521f8a20a0',\\n    '76de9616-3d7b-49d7-b909-e154dda91489',\\n    '386d8856-9020-47eb-a21a-2ebe6b81428e',\\n    'd5dc02fc-707a-4084-854a-79f5866d4dd3',\\n    '5ad39764-9b9b-48cb-8819-43ab40694b06',\\n    '9b8f8c9a-7f76-4bc2-95c9-652b13f13a44',\\n    '8edf6e2c-99b6-49af-b342-4aefe811b2f3',\\n    '5f4d1be1-61b7-4b11-ba51-6e9b7f094c82'\\n  )\\n)\\nSELECT project_id, plan_name\\nFROM cte\\nWHERE rn = 1;\"}",
                  "name": "query_control_plane_data"
                },
                "type": "function"
              }
            ]
          }
        }
      ],
      "created": 1738142375,
      "model": "o1-2024-12-17",
      "object": "chat.completion",
      "service_tier": "default",
      "system_fingerprint": "fp_d91c966719",
      "usage": {
        "completion_tokens": 2981,
        "prompt_tokens": 3725,
        "total_tokens": 6706,
        "completion_tokens_details": {
          "accepted_prediction_tokens": 0,
          "audio_tokens": 0,
          "reasoning_tokens": 2624,
          "rejected_prediction_tokens": 0
        },
        "prompt_tokens_details": {
          "audio_tokens": 0,
          "cached_tokens": 1536
        }
      }
    }
  },
  {
    "timestamp": "2025-01-29T14:50:37.628402",
    "response": {
      "id": "chatcmpl-AuyWsc3JIsT4eMwo1Y5p2JwxNvJqv",
      "choices": [
        {
          "finish_reason": "stop",
          "index": 0,
          "logprobs": null,
          "message": {
            "content": "<tickets>\n205\n139\n143\n215\n144\n</tickets>",
            "refusal": null,
            "role": "assistant",
            "audio": null,
            "function_call": null,
            "tool_calls": null
          }
        }
      ],
      "created": 1738142406,
      "model": "o1-2024-12-17",
      "object": "chat.completion",
      "service_tier": "default",
      "system_fingerprint": "fp_d91c966719",
      "usage": {
        "completion_tokens": 3355,
        "prompt_tokens": 4425,
        "total_tokens": 7780,
        "completion_tokens_details": {
          "accepted_prediction_tokens": 0,
          "audio_tokens": 0,
          "reasoning_tokens": 3328,
          "rejected_prediction_tokens": 0
        },
        "prompt_tokens_details": {
          "audio_tokens": 0,
          "cached_tokens": 3584
        }
      }
    }
  }
]